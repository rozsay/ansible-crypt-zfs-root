---
# defaults file for 02-chroot
_efi: true
_swap: true
_root_pool: r_system
_installdir: /mnt/install/
_root_disks:
  - sda

_swap_opts:
  volsize: 1G
  compression: zle
  logbias: throughput
  sync: always
  primarycache: metadata
  secondarycache: none
  com.sun:auto-snapshot: false

_timezone: "UTC"
#_grub_cmdline: "elevator=noop"
_grub_cmdline: "root=ZFS={{ _root_pool }}/root"

_legacy_device_nodes: false
_root_disks_by_id: "/dev/disk/by-id/{{ (_root_disks | map('extract', hostvars[inventory_hostname]['ansible_devices'], ['links', 'ids', 0]) | list).0 }}"
_root_device_list: "{{ _legacy_device_nodes | ternary((_root_disks | map('regex_replace', '(.*)', '/dev/\\g<1>') | list), _root_disks_by_id) }}"

_efi_part_append: "{{ _legacy_device_nodes | ternary('1', '-part1') }}"
_boot_part_append: "{{ _legacy_device_nodes | ternary('2', '-part2') }}"
_root_part_append: "{{ _legacy_device_nodes | ternary('3', '-part3') }}"

_crypt_passphrase: "Password"

_extra_locales: []
_locales: "{{ _extra_locales + ['en_US.UTF-8'] }}"
_lang: "en_US.UTF-8"
_kernel_package: "linux-image-generic linux-headers-generic"

_root_password_hash: "$2y$10$SPFGSp7upVEKeE81zZzD5eAnSj6oiXjdtyo56JLJIsQM1WSxEGb/q"  # "Password"

sshd_enabled: true
sshd_port: "1992"
sshd_listen_address: ["::", "0.0.0.0"]
sshd_allow_groups: []
sshd_protocol: "2"
sshd_host_keys: ["ed25519", "rsa", "ecdsa"]
sshd_kex_algorithms:
  - "curve25519-sha256@libssh.org"
  - "ecdh-sha2-nistp521"
  - "ecdh-sha2-nistp384"
  - "ecdh-sha2-nistp256"
  - "diffie-hellman-group-exchange-sha256"
sshd_ciphers:
  - "chacha20-poly1305@openssh.com"
  - "aes256-gcm@openssh.com"
  - "aes128-gcm@openssh.com"
  - "aes256-ctr"
  - "aes192-ctr"
  - "aes128-ctr"
sshd_macs:
  - "hmac-sha2-512-etm@openssh.com"
  - "hmac-sha2-256-etm@openssh.com"
  - "umac-128-etm@openssh.com"
  - "hmac-sha2-512"
  - "hmac-sha2-256"
  - "umac-128@openssh.com"
sshd_use_privilege_separation: "yes"
sshd_key_regeneration_interval: "3600"
sshd_server_key_bits: "1024"
sshd_syslog_facility: "AUTH"
sshd_log_level: "INFO"
sshd_login_grace_time: "120"
sshd_permit_root_login: "no"
sshd_strict_modes: "yes"
sshd_rsa_authentication: "yes"
sshd_pubkey_authentication: "yes"
sshd_authorized_keys_file: "%h/.ssh/authorized_keys"
sshd_ignore_rhosts: "yes"
sshd_rhosts_rsa_authentication: "no"
sshd_host_based_authentication: "no"
sshd_ignore_user_known_hosts: "no"
sshd_permit_empty_passwords: "no"
sshd_challenge_response_authentication: "no"
sshd_password_authentication: "yes"
sshd_gss_api_authentication: "no"
sshd_gss_api_cleanup_credentials: "yes"
sshd_x11_forwarding: "yes"
sshd_x11_display_offset: "10"
sshd_print_motd: "no"
sshd_print_last_log: "yes"
sshd_tcp_keep_alive: "yes"
sshd_max_startups: "10:30:100"
sshd_banner: "none"
sshd_accept_env: "LANG LC_*"
sshd_subsystem: "sftp /usr/lib/openssh/sftp-server"
sshd_use_pam: "yes"

default_packages:
  - 'gdisk'
  - 'ansible'
  - 'openssh-server'
  - 'mc'
  - 'ssh'
  - 'nano'
  - 'lshw'
  - 'rsync'
  - 'ncdu'
  - 'ethtool'
  - 'wget'
  - 'git'
  - 'gpart'
  - 'gparted '
  - 'ssh-askpass'
  - 'net-tools'
  - 'tree'
  - 'htop'
  - 'strace '
  - 'p7zip-full'
